(()=>{"use strict";const e={videoSearchResult:[],videoTrending:[],searchesPerformed:[],videoCurrentlySelected:[]},t=e=>{let t="";for(let i=0;i<e.length;i++)t+=`\n                        <div class="videoCard__VideoInfo" id=${e[i].id}>\n                            <div class="videoCard__VideoInfo__thumbnail">\n                                <img src="${e[i].thumbnail}">\n                            </div>\n                            <div class="videoCard__VideoInfo__summary">\n                                <div>\n                                <i class="fa fa-user-circle-o" aria-hidden="true"></i>\n                                </div>\n                                <div>\n                                    <div>\n                                        <strong><p>${e[i].title}</p></strong>\n                                    </div>\n                                    <div>\n                                        <p>${e[i].channelTitle}</p>\n                                    </div>\n                                    <div>\n                                        <p>${e[i].publishedWeeksAgo()}</p>\n                                    </div> \n                                </div>\n                            </div>\n                        </div>\n                    `;return t};class i{constructor(e,t,i,n,r,s){this.id=e,this.title=t,this.description=i,this.thumbnail=n,this.channelTitle=r,this.publishedAt=new Date(s)}publishedWeeksAgo(){const e=this.publishedAt.getFullYear(),t=this.publishedAt.getMonth(),i=this.publishedAt.getDay(),n=this.publishedAt.getHours(),r=(new Date).getFullYear(),s=(new Date).getMonth(),o=(new Date).getDay(),d=(new Date).getHours();return i===o?d-n+" hours ago":s===t?o-i+" days ago":e===r?s-t+" months ago":r-e+" years ago"}}const n=function(t,n){if(t.hasOwnProperty("items")&&n===e.videoTrending)for(let e=0;e<t.items.length;e++)n[e]=new i(t.items[e].id,t.items[e].snippet.title,t.items[e].snippet.description,t.items[e].snippet.thumbnails.medium.url,t.items[e].snippet.channelTitle,t.items[e].snippet.publishedAt);else if(t.hasOwnProperty("items")&&n===e.videoSearchResult)for(let e=0;e<t.items.length;e++)n[e]=new i(t.items[e].id.videoId,t.items[e].snippet.title,t.items[e].snippet.description,t.items[e].snippet.thumbnails.medium.url,t.items[e].snippet.channelTitle,t.items[e].snippet.publishedAt);else for(let e=0;e<t.length;e++)n[e]=new i(t[e].id,t[e].title,t[e].description,t[e].thumbnail,t[e].channelTitle,t[e].publishedAt);return n},r=t=>{const i=document.querySelector(".placeholderVideoContainer"),n=document.querySelector(".modalTitle"),r=document.querySelector(".modalDescription__text"),s=document.querySelector(".modalmetaDataViews__channelName"),o=document.querySelector(".modalmetaDataViews__uploaded");let d;if(t&&void 0!==t)"trending"===t?d=e.videoTrending.find((t=>t.id===e.videoCurrentlySelected[0])):"searched"===t&&(d=e.videoSearchResult.find((t=>t.id===e.videoCurrentlySelected[0])));else{let t=e.videoSearchResult.find((t=>t.id===e.videoCurrentlySelected[0])),i=e.videoTrending.find((t=>t.id===e.videoCurrentlySelected[0]));d=t||i}o.innerHTML=d?`Uploaded: ${d.publishedWeeksAgo()}`:"",n.innerHTML=d?d.title:" ",r.innerHTML=d?d.description:"",s.innerHTML=d?`Channel ID: ${d.channelTitle}`:"",i.innerHTML=`<iframe src="https://www.youtube.com/embed/${e.videoCurrentlySelected[0]}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`},s=()=>{let t="";const i=document.querySelector(".videoModal__container"),n=document.querySelectorAll(".videoCard__VideoInfo"),s=document.querySelectorAll(".videoCardSearched"),o=document.querySelector(".videoModal"),d=document.querySelector(".closer");o.addEventListener("click",(e=>{e.stopPropagation()})),n.forEach((n=>{n.addEventListener("click",(s=>{e.videoCurrentlySelected=[n.id],i.classList.remove("display"),r("trending"),t="trending"}))})),s.forEach((n=>{n.addEventListener("click",(s=>{e.videoCurrentlySelected=[n.id],i.classList.remove("display"),r("searched"),t="searched"}))})),d.addEventListener("click",(()=>{i.classList.add("display"),r("trending"===t?"trending":"searched")})),i.addEventListener("click",(()=>{i.classList.add("display"),r("trending"===t?"trending":"searched")}))},o=e=>{const t=document.querySelector(".mainContainer__videoContainer___search"),i=document.querySelector(".mainContainer__videoContainer___recommended");t.classList.add("display"),i.classList.remove("display"),i.innerHTML=e,s()},d=()=>fetch("https://www.googleapis.com/youtube/v3/videos?part=snippet%2CcontentDetails%2Cstatistics&chart=mostPopular&maxResults=16&key=AIzaSyCzITvmAO8Q1gHaYdIxMk2YhJdjdylqbNM").then((e=>e.json())).then((t=>{let i=n(t,e.videoTrending);return localStorage.setItem("TrendingVideos",JSON.stringify(i)),e.videoTrending})).then((e=>t(e))).then((e=>o(e))).catch((e=>{throw alert("Apologies, the daily number of search requests for this free public API has been reached. The limit is reset every day, so please try again in 24 hours."),e})),a=e=>{let t="";for(let i=0;i<e.length;i++)t+=`<div class="videoCardSearched" id=${e[i].id}>\n                        <div class="videoCardSearched__image">\n                            <img src="${e[i].thumbnail}">\n                        </div>\n                        <div class="videoCardSearched__VideoInfo">\n                            <h3>${e[i].title}</h3>\n                            <div>\n                                <ul>\n                                    <li>${e[i].channelTitle}</li>\n                                    <li>${e[i].publishedWeeksAgo()}</li>\n                                </ul>\n                            </div>\n                            <p>${e[i].description}</p>\n                        </div>\n                    </div>\n                 `;return t},l=e=>{const t=document.querySelector(".mainContainer__videoContainer___search"),i=document.querySelector(".mainContainer__videoContainer___recommended");t.classList.remove("display"),i.classList.add("display"),t.style["grid-template-columns"]="repeat(1, 1fr)",t.innerHTML=e,s(e)},c=t=>fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${t}&key=AIzaSyCzITvmAO8Q1gHaYdIxMk2YhJdjdylqbNM`).then((e=>e.json())).then((t=>n(t,e.videoSearchResult))).then((e=>a(e))).then((e=>l(e))).catch((e=>{throw alert("Apologies, the daily number of search requests for this free public API has been reached. The limit is reset every day, so please try again in 24 hours."),e}));if((()=>{const i=document.querySelector(".mainContainer"),n=document.querySelector(".mainContainer__videoContainer__h3"),r=document.querySelector(".header__input input"),s=document.querySelector(".mainContainer__sideNavigation__history"),d=document.querySelector(".mainContainer__modalNavigation__history"),a=document.querySelector(".header__menu"),u=document.querySelector(".sideMenu"),h=document.querySelector(".sideMenuClose"),m=document.querySelector(".mainContainer__sideNavigation__trending"),p=document.querySelector(".mainContainer__modalNavigation__trending"),v=document.querySelector(".mainContainer__modalNavigation__home"),g=document.querySelector(".sideMenu__menu"),y=document.querySelector(".mainContainer__sideNavigation__home");a.addEventListener("click",(e=>{u.classList.remove("display"),i.style.position="absolute",i.style.left="102.5px"})),g.addEventListener("click",(e=>{e.stopPropagation()})),h.addEventListener("click",(e=>{u.classList.add("display"),i.style.position="static",i.style.left="0px"})),u.addEventListener("click",(()=>{u.classList.add("display"),i.style.position="static",i.style.left="0px"}));[m,p,y,v].forEach((i=>i.addEventListener("click",(r=>{const s=t(e.videoTrending);o(s),n.innerHTML=i===m||i===p?"Trending":"Home"}))));[s,d].forEach((t=>t.addEventListener("click",(t=>{let i=`<div class="historyStorageResults">\n                            <h3>Here are your previous searches:</h3>\n                        <p>${e.searchesPerformed.length} searchs were previously performed</p>\n                        <ol>`;if(e.searchesPerformed.length>0)for(let t=0;t<e.searchesPerformed.length;t++)i+=`<li>${e.searchesPerformed[t].toUpperCase()}</li>`;i+="</ol></div>",n.innerHTML="History",l(i)})))),r.addEventListener("keypress",(t=>{if("Enter"===t.key){if(null===t.target.value||void 0===t.target.value||""===t.target.value)return;e.searchesPerformed.push(t.target.value),localStorage.setItem("searchResults",JSON.stringify(e.searchesPerformed)),c(t.target.value),t.target.value=""}}))})(),localStorage.searchResults){let t=localStorage.getItem("searchResults");e.searchesPerformed=JSON.parse(t)}if(localStorage.TrendingVideos){let i=JSON.parse(localStorage.getItem("TrendingVideos")),r=n(i,e.videoTrending);e.videoTrending=[...r],console.log("stored");let s=t(e.videoTrending);o(s)}else console.log("new"),d()})();